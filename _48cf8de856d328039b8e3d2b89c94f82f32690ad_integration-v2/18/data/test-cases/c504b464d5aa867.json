{"uid":"c504b464d5aa867","name":"test_run_and_generate_no_compile","fullName":"tests.functional.adapter.test_basic.TestDocsGenerateFirebolt#test_run_and_generate_no_compile","historyId":"bf3b92cf7bd209e94a9e682bc3c60c38","time":{"start":1722434984966,"stop":1722434994794,"duration":9828},"status":"failed","statusMessage":"AssertionError: Key 'metadata' in 'seed.test.seed' did not match\nassert {'comment': N...r': None, ...} == {'comment': N...r': None, ...}\n  Omitting 5 identical items, use -vv to show\n  Differing items:\n  {'type': 'BASE TABLE'} != {'type': 'DIMENSION'}\n  Full diff:\n    {\n     'comment': None,\n     'database': 'integration_testing__1722434715031',\n     'name': 'seed',\n     'owner': None,\n     'schema': 'public',\n  -  'type': 'DIMENSION',\n  +  'type': 'BASE TABLE',\n    }","statusTrace":"self = <test_basic.TestDocsGenerateFirebolt object at 0x7fcd12f00520>\nproject = <dbt.tests.fixtures.project.TestProjInfo object at 0x7fcd1049d9a0>\nexpected_catalog = {'nodes': {'model.test.model': {'columns': {'email': {'comment': None, 'index': <dbt.tests.util.AnyInteger object at 0...e', 'id': 'has_stats', 'include': False, 'label': 'Has Stats?', ...}}, 'unique_id': 'source.test.my_source.my_table'}}}\n\n    def test_run_and_generate_no_compile(self, project, expected_catalog):\n        start_time = run_and_generate(project, [\"--no-compile\"])\n        assert not os.path.exists(os.path.join(project.project_root, \"target\", \"manifest.json\"))\n>       verify_catalog(project, expected_catalog, start_time)\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/dbt/tests/adapter/basic/test_docs_generate.py:435: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nproject = <dbt.tests.fixtures.project.TestProjInfo object at 0x7fcd1049d9a0>\nexpected_catalog = {'nodes': {'model.test.model': {'columns': {'email': {'comment': None, 'index': <dbt.tests.util.AnyInteger object at 0...e', 'id': 'has_stats', 'include': False, 'label': 'Has Stats?', ...}}, 'unique_id': 'source.test.my_source.my_table'}}}\nstart_time = datetime.datetime(2024, 7, 31, 14, 9, 53, 94019)\n\n    def verify_catalog(project, expected_catalog, start_time):\n        # get the catalog.json\n        catalog_path = os.path.join(project.project_root, \"target\", \"catalog.json\")\n        assert os.path.exists(catalog_path)\n        catalog = get_artifact(catalog_path)\n    \n        # verify the catalog\n        assert set(catalog) == {\"errors\", \"metadata\", \"nodes\", \"sources\"}\n        verify_metadata(\n            catalog[\"metadata\"],\n            \"https://schemas.getdbt.com/dbt/catalog/v1.json\",\n            start_time,\n        )\n        assert not catalog[\"errors\"]\n        for key in \"nodes\", \"sources\":\n            for unique_id, expected_node in expected_catalog[key].items():\n                found_node = catalog[key][unique_id]\n                for node_key in expected_node:\n                    assert node_key in found_node\n>                   assert (\n                        found_node[node_key] == expected_node[node_key]\n                    ), f\"Key '{node_key}' in '{unique_id}' did not match\"\nE                   AssertionError: Key 'metadata' in 'seed.test.seed' did not match\nE                   assert {'comment': N...r': None, ...} == {'comment': N...r': None, ...}\nE                     Omitting 5 identical items, use -vv to show\nE                     Differing items:\nE                     {'type': 'BASE TABLE'} != {'type': 'DIMENSION'}\nE                     Full diff:\nE                       {\nE                        'comment': None,\nE                        'database': 'integration_testing__1722434715031',\nE                        'name': 'seed',\nE                        'owner': None,\nE                        'schema': 'public',\nE                     -  'type': 'DIMENSION',\nE                     +  'type': 'BASE TABLE',\nE                       }\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/dbt/tests/adapter/basic/test_docs_generate.py:332: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"tmpdir_factory","time":{"start":1722434770967,"stop":1722434770967,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"shared_data_dir","time":{"start":1722434770967,"stop":1722434770967,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data_dir","time":{"start":1722434770967,"stop":1722434770967,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clean_up_logging","time":{"start":1722434974699,"stop":1722434974699,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project_root","time":{"start":1722434974699,"stop":1722434974700,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"profiles_root","time":{"start":1722434974700,"stop":1722434974700,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"profiles_config_update","time":{"start":1722434974701,"stop":1722434974701,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dbt_profile_data","time":{"start":1722434974701,"stop":1722434974701,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"profiles_yml","time":{"start":1722434974701,"stop":1722434974702,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"unique_schema","time":{"start":1722434974701,"stop":1722434974701,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dbt_profile_target","time":{"start":1722434974701,"stop":1722434974701,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"prefix","time":{"start":1722434974701,"stop":1722434974701,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dbt_project_yml","time":{"start":1722434974702,"stop":1722434974703,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project_config_update","time":{"start":1722434974702,"stop":1722434974702,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"selectors","time":{"start":1722434974703,"stop":1722434974704,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"packages","time":{"start":1722434974703,"stop":1722434974703,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"packages_yml","time":{"start":1722434974703,"stop":1722434974703,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dependencies","time":{"start":1722434974703,"stop":1722434974703,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dependencies_yml","time":{"start":1722434974703,"stop":1722434974703,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"selectors_yml","time":{"start":1722434974704,"stop":1722434974704,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"adapter","time":{"start":1722434974704,"stop":1722434975146,"duration":442},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"macros","time":{"start":1722434975146,"stop":1722434975146,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"snapshots","time":{"start":1722434975146,"stop":1722434975146,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"models","time":{"start":1722434975146,"stop":1722434975146,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"analyses","time":{"start":1722434975147,"stop":1722434975147,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"seeds","time":{"start":1722434975147,"stop":1722434975147,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"properties","time":{"start":1722434975147,"stop":1722434975147,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tests","time":{"start":1722434975147,"stop":1722434975147,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project_files","time":{"start":1722434975147,"stop":1722434975148,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"logs_dir","time":{"start":1722434975148,"stop":1722434975149,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1722434975149,"stop":1722434975149,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1722434975149,"stop":1722434976527,"duration":1378},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1722434976527,"stop":1722434984965,"duration":8438},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"profile_user","time":{"start":1722434984965,"stop":1722434984965,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"expected_catalog","time":{"start":1722434984965,"stop":1722434984965,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"unique_schema","time":{"start":1722435070810,"stop":1722435070810,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project_config_update","time":{"start":1722435070812,"stop":1722435070812,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"macros","time":{"start":1722435071261,"stop":1722435071261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"snapshots","time":{"start":1722435071261,"stop":1722435071261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"seeds","time":{"start":1722435071261,"stop":1722435071261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Key 'metadata' in 'seed.test.seed' did not match\nassert {'comment': N...r': None, ...} == {'comment': N...r': None, ...}\n  Omitting 5 identical items, use -vv to show\n  Differing items:\n  {'type': 'BASE TABLE'} != {'type': 'DIMENSION'}\n  Full diff:\n    {\n     'comment': None,\n     'database': 'integration_testing__1722434715031',\n     'name': 'seed',\n     'owner': None,\n     'schema': 'public',\n  -  'type': 'DIMENSION',\n  +  'type': 'BASE TABLE',\n    }","statusTrace":"self = <test_basic.TestDocsGenerateFirebolt object at 0x7fcd12f00520>\nproject = <dbt.tests.fixtures.project.TestProjInfo object at 0x7fcd1049d9a0>\nexpected_catalog = {'nodes': {'model.test.model': {'columns': {'email': {'comment': None, 'index': <dbt.tests.util.AnyInteger object at 0...e', 'id': 'has_stats', 'include': False, 'label': 'Has Stats?', ...}}, 'unique_id': 'source.test.my_source.my_table'}}}\n\n    def test_run_and_generate_no_compile(self, project, expected_catalog):\n        start_time = run_and_generate(project, [\"--no-compile\"])\n        assert not os.path.exists(os.path.join(project.project_root, \"target\", \"manifest.json\"))\n>       verify_catalog(project, expected_catalog, start_time)\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/dbt/tests/adapter/basic/test_docs_generate.py:435: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nproject = <dbt.tests.fixtures.project.TestProjInfo object at 0x7fcd1049d9a0>\nexpected_catalog = {'nodes': {'model.test.model': {'columns': {'email': {'comment': None, 'index': <dbt.tests.util.AnyInteger object at 0...e', 'id': 'has_stats', 'include': False, 'label': 'Has Stats?', ...}}, 'unique_id': 'source.test.my_source.my_table'}}}\nstart_time = datetime.datetime(2024, 7, 31, 14, 9, 53, 94019)\n\n    def verify_catalog(project, expected_catalog, start_time):\n        # get the catalog.json\n        catalog_path = os.path.join(project.project_root, \"target\", \"catalog.json\")\n        assert os.path.exists(catalog_path)\n        catalog = get_artifact(catalog_path)\n    \n        # verify the catalog\n        assert set(catalog) == {\"errors\", \"metadata\", \"nodes\", \"sources\"}\n        verify_metadata(\n            catalog[\"metadata\"],\n            \"https://schemas.getdbt.com/dbt/catalog/v1.json\",\n            start_time,\n        )\n        assert not catalog[\"errors\"]\n        for key in \"nodes\", \"sources\":\n            for unique_id, expected_node in expected_catalog[key].items():\n                found_node = catalog[key][unique_id]\n                for node_key in expected_node:\n                    assert node_key in found_node\n>                   assert (\n                        found_node[node_key] == expected_node[node_key]\n                    ), f\"Key '{node_key}' in '{unique_id}' did not match\"\nE                   AssertionError: Key 'metadata' in 'seed.test.seed' did not match\nE                   assert {'comment': N...r': None, ...} == {'comment': N...r': None, ...}\nE                     Omitting 5 identical items, use -vv to show\nE                     Differing items:\nE                     {'type': 'BASE TABLE'} != {'type': 'DIMENSION'}\nE                     Full diff:\nE                       {\nE                        'comment': None,\nE                        'database': 'integration_testing__1722434715031',\nE                        'name': 'seed',\nE                        'owner': None,\nE                        'schema': 'public',\nE                     -  'type': 'DIMENSION',\nE                     +  'type': 'BASE TABLE',\nE                       }\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/dbt/tests/adapter/basic/test_docs_generate.py:332: AssertionError","steps":[],"attachments":[{"uid":"d11c98a1d1e6eca6","name":"log","source":"d11c98a1d1e6eca6.txt","type":"text/plain","size":20323},{"uid":"2827b7f65ae68c81","name":"stdout","source":"2827b7f65ae68c81.txt","type":"text/plain","size":2245}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup::0","time":{"start":1722435007423,"stop":1722435007423,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1722435007423,"stop":1722435027625,"duration":20202},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"logs_dir::0","time":{"start":1722435027626,"stop":1722435027626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"adapter::0","time":{"start":1722435027628,"stop":1722435027628,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"profiles_yml::0","time":{"start":1722435027630,"stop":1722435027630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.functional.adapter"},{"name":"suite","value":"test_basic"},{"name":"subSuite","value":"TestDocsGenerateFirebolt"},{"name":"host","value":"fv-az1535-722"},{"name":"thread","value":"2167-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.functional.adapter.test_basic"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"c504b464d5aa867.json","parameterValues":[]}