{"uid":"7450bf1f54ee7a99","name":"test_run_and_generate_no_compile","fullName":"tests.functional.adapter.test_basic.TestDocsGenerateFirebolt#test_run_and_generate_no_compile","historyId":"bf3b92cf7bd209e94a9e682bc3c60c38","time":{"start":1722519060734,"stop":1722519067515,"duration":6781},"status":"failed","statusMessage":"AssertionError: Key 'metadata' in 'seed.test.seed' did not match\nassert {'comment': N...r': None, ...} == {'comment': N...r': None, ...}\n  Omitting 5 identical items, use -vv to show\n  Differing items:\n  {'type': 'DIMENSION'} != {'type': 'BASE TABLE'}\n  Full diff:\n    {\n     'comment': None,\n     'database': 'integration_testing__1722518660',\n     'name': 'seed',\n     'owner': None,\n     'schema': 'public',\n  -  'type': 'BASE TABLE',\n  +  'type': 'DIMENSION',\n    }","statusTrace":"self = <test_basic.TestDocsGenerateFirebolt object at 0x7f3cc25536a0>\nproject = <dbt.tests.fixtures.project.TestProjInfo object at 0x7f3cc0090e80>\nexpected_catalog = {'nodes': {'model.test.model': {'columns': {'email': {'comment': None, 'index': <dbt.tests.util.AnyInteger object at 0...e', 'id': 'has_stats', 'include': False, 'label': 'Has Stats?', ...}}, 'unique_id': 'source.test.my_source.my_table'}}}\n\n    def test_run_and_generate_no_compile(self, project, expected_catalog):\n        start_time = run_and_generate(project, [\"--no-compile\"])\n        assert not os.path.exists(os.path.join(project.project_root, \"target\", \"manifest.json\"))\n>       verify_catalog(project, expected_catalog, start_time)\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/dbt/tests/adapter/basic/test_docs_generate.py:435: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nproject = <dbt.tests.fixtures.project.TestProjInfo object at 0x7f3cc0090e80>\nexpected_catalog = {'nodes': {'model.test.model': {'columns': {'email': {'comment': None, 'index': <dbt.tests.util.AnyInteger object at 0...e', 'id': 'has_stats', 'include': False, 'label': 'Has Stats?', ...}}, 'unique_id': 'source.test.my_source.my_table'}}}\nstart_time = datetime.datetime(2024, 8, 1, 13, 31, 6, 440527)\n\n    def verify_catalog(project, expected_catalog, start_time):\n        # get the catalog.json\n        catalog_path = os.path.join(project.project_root, \"target\", \"catalog.json\")\n        assert os.path.exists(catalog_path)\n        catalog = get_artifact(catalog_path)\n    \n        # verify the catalog\n        assert set(catalog) == {\"errors\", \"metadata\", \"nodes\", \"sources\"}\n        verify_metadata(\n            catalog[\"metadata\"],\n            \"https://schemas.getdbt.com/dbt/catalog/v1.json\",\n            start_time,\n        )\n        assert not catalog[\"errors\"]\n        for key in \"nodes\", \"sources\":\n            for unique_id, expected_node in expected_catalog[key].items():\n                found_node = catalog[key][unique_id]\n                for node_key in expected_node:\n                    assert node_key in found_node\n>                   assert (\n                        found_node[node_key] == expected_node[node_key]\n                    ), f\"Key '{node_key}' in '{unique_id}' did not match\"\nE                   AssertionError: Key 'metadata' in 'seed.test.seed' did not match\nE                   assert {'comment': N...r': None, ...} == {'comment': N...r': None, ...}\nE                     Omitting 5 identical items, use -vv to show\nE                     Differing items:\nE                     {'type': 'DIMENSION'} != {'type': 'BASE TABLE'}\nE                     Full diff:\nE                       {\nE                        'comment': None,\nE                        'database': 'integration_testing__1722518660',\nE                        'name': 'seed',\nE                        'owner': None,\nE                        'schema': 'public',\nE                     -  'type': 'BASE TABLE',\nE                     +  'type': 'DIMENSION',\nE                       }\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/dbt/tests/adapter/basic/test_docs_generate.py:332: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"tmpdir_factory","time":{"start":1722518998892,"stop":1722518998892,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data_dir","time":{"start":1722518998892,"stop":1722518998892,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"shared_data_dir","time":{"start":1722518998892,"stop":1722518998892,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clean_up_logging","time":{"start":1722519052586,"stop":1722519052586,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"profiles_root","time":{"start":1722519052586,"stop":1722519052587,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project_root","time":{"start":1722519052586,"stop":1722519052586,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"prefix","time":{"start":1722519052587,"stop":1722519052587,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dbt_profile_target","time":{"start":1722519052587,"stop":1722519052587,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"unique_schema","time":{"start":1722519052587,"stop":1722519052587,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"profiles_config_update","time":{"start":1722519052587,"stop":1722519052587,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"profiles_yml","time":{"start":1722519052587,"stop":1722519052588,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dbt_profile_data","time":{"start":1722519052587,"stop":1722519052587,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dbt_project_yml","time":{"start":1722519052588,"stop":1722519052589,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project_config_update","time":{"start":1722519052588,"stop":1722519052588,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"packages_yml","time":{"start":1722519052589,"stop":1722519052589,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"packages","time":{"start":1722519052589,"stop":1722519052589,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dependencies","time":{"start":1722519052589,"stop":1722519052590,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"selectors_yml","time":{"start":1722519052590,"stop":1722519052590,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dependencies_yml","time":{"start":1722519052590,"stop":1722519052590,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"selectors","time":{"start":1722519052590,"stop":1722519052590,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"adapter","time":{"start":1722519052590,"stop":1722519053037,"duration":447},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"properties","time":{"start":1722519053037,"stop":1722519053037,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"models","time":{"start":1722519053037,"stop":1722519053037,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"snapshots","time":{"start":1722519053037,"stop":1722519053037,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"macros","time":{"start":1722519053037,"stop":1722519053037,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tests","time":{"start":1722519053038,"stop":1722519053038,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"analyses","time":{"start":1722519053038,"stop":1722519053038,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"seeds","time":{"start":1722519053038,"stop":1722519053038,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project_files","time":{"start":1722519053038,"stop":1722519053039,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project","time":{"start":1722519053039,"stop":1722519053978,"duration":939},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1722519053039,"stop":1722519053039,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"logs_dir","time":{"start":1722519053039,"stop":1722519053039,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1722519053979,"stop":1722519060733,"duration":6754},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"profile_user","time":{"start":1722519060733,"stop":1722519060733,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"expected_catalog","time":{"start":1722519060733,"stop":1722519060733,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"unique_schema","time":{"start":1722519110430,"stop":1722519110430,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project_config_update","time":{"start":1722519110431,"stop":1722519110431,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"macros","time":{"start":1722519110880,"stop":1722519110880,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"snapshots","time":{"start":1722519110880,"stop":1722519110880,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Key 'metadata' in 'seed.test.seed' did not match\nassert {'comment': N...r': None, ...} == {'comment': N...r': None, ...}\n  Omitting 5 identical items, use -vv to show\n  Differing items:\n  {'type': 'DIMENSION'} != {'type': 'BASE TABLE'}\n  Full diff:\n    {\n     'comment': None,\n     'database': 'integration_testing__1722518660',\n     'name': 'seed',\n     'owner': None,\n     'schema': 'public',\n  -  'type': 'BASE TABLE',\n  +  'type': 'DIMENSION',\n    }","statusTrace":"self = <test_basic.TestDocsGenerateFirebolt object at 0x7f3cc25536a0>\nproject = <dbt.tests.fixtures.project.TestProjInfo object at 0x7f3cc0090e80>\nexpected_catalog = {'nodes': {'model.test.model': {'columns': {'email': {'comment': None, 'index': <dbt.tests.util.AnyInteger object at 0...e', 'id': 'has_stats', 'include': False, 'label': 'Has Stats?', ...}}, 'unique_id': 'source.test.my_source.my_table'}}}\n\n    def test_run_and_generate_no_compile(self, project, expected_catalog):\n        start_time = run_and_generate(project, [\"--no-compile\"])\n        assert not os.path.exists(os.path.join(project.project_root, \"target\", \"manifest.json\"))\n>       verify_catalog(project, expected_catalog, start_time)\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/dbt/tests/adapter/basic/test_docs_generate.py:435: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nproject = <dbt.tests.fixtures.project.TestProjInfo object at 0x7f3cc0090e80>\nexpected_catalog = {'nodes': {'model.test.model': {'columns': {'email': {'comment': None, 'index': <dbt.tests.util.AnyInteger object at 0...e', 'id': 'has_stats', 'include': False, 'label': 'Has Stats?', ...}}, 'unique_id': 'source.test.my_source.my_table'}}}\nstart_time = datetime.datetime(2024, 8, 1, 13, 31, 6, 440527)\n\n    def verify_catalog(project, expected_catalog, start_time):\n        # get the catalog.json\n        catalog_path = os.path.join(project.project_root, \"target\", \"catalog.json\")\n        assert os.path.exists(catalog_path)\n        catalog = get_artifact(catalog_path)\n    \n        # verify the catalog\n        assert set(catalog) == {\"errors\", \"metadata\", \"nodes\", \"sources\"}\n        verify_metadata(\n            catalog[\"metadata\"],\n            \"https://schemas.getdbt.com/dbt/catalog/v1.json\",\n            start_time,\n        )\n        assert not catalog[\"errors\"]\n        for key in \"nodes\", \"sources\":\n            for unique_id, expected_node in expected_catalog[key].items():\n                found_node = catalog[key][unique_id]\n                for node_key in expected_node:\n                    assert node_key in found_node\n>                   assert (\n                        found_node[node_key] == expected_node[node_key]\n                    ), f\"Key '{node_key}' in '{unique_id}' did not match\"\nE                   AssertionError: Key 'metadata' in 'seed.test.seed' did not match\nE                   assert {'comment': N...r': None, ...} == {'comment': N...r': None, ...}\nE                     Omitting 5 identical items, use -vv to show\nE                     Differing items:\nE                     {'type': 'DIMENSION'} != {'type': 'BASE TABLE'}\nE                     Full diff:\nE                       {\nE                        'comment': None,\nE                        'database': 'integration_testing__1722518660',\nE                        'name': 'seed',\nE                        'owner': None,\nE                        'schema': 'public',\nE                     -  'type': 'BASE TABLE',\nE                     +  'type': 'DIMENSION',\nE                       }\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/dbt/tests/adapter/basic/test_docs_generate.py:332: AssertionError","steps":[],"attachments":[{"uid":"443a295d0480b19c","name":"log","source":"443a295d0480b19c.txt","type":"text/plain","size":15754},{"uid":"c78ddeb89dac9cdd","name":"stdout","source":"c78ddeb89dac9cdd.txt","type":"text/plain","size":2245}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup::0","time":{"start":1722519076596,"stop":1722519076596,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"project::0","time":{"start":1722519076596,"stop":1722519085442,"duration":8846},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"logs_dir::0","time":{"start":1722519085443,"stop":1722519085443,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"adapter::0","time":{"start":1722519085445,"stop":1722519085445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"profiles_yml::0","time":{"start":1722519085447,"stop":1722519085447,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.functional.adapter"},{"name":"suite","value":"test_basic"},{"name":"subSuite","value":"TestDocsGenerateFirebolt"},{"name":"host","value":"fv-az568-955"},{"name":"thread","value":"2376-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.functional.adapter.test_basic"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":3},"items":[{"uid":"ca912e58662c3082","reportUrl":"https://firebolt-db.github.io/dbt-firebolt/_55ea5f0aec531c24935ce5d2f5ad2cec02cb2b35_integration-v1/34//#testresult/ca912e58662c3082","status":"failed","statusDetails":"AssertionError: Key 'metadata' in 'seed.test.seed' did not match\nassert {'comment': N...r': None, ...} == {'comment': N...r': None, ...}\n  Omitting 5 identical items, use -vv to show\n  Differing items:\n  {'type': 'DIMENSION'} != {'type': 'BASE TABLE'}\n  Full diff:\n    {\n     'comment': None,\n     'database': 'integration_testing__1722500390',\n     'name': 'seed',\n     'owner': None,\n     'schema': 'public',\n  -  'type': 'BASE TABLE',\n  +  'type': 'DIMENSION',\n    }","time":{"start":1722500733745,"stop":1722500736289,"duration":2544}},{"uid":"2fa6f8c962cf469c","reportUrl":"https://firebolt-db.github.io/dbt-firebolt/_55ea5f0aec531c24935ce5d2f5ad2cec02cb2b35_integration-v1/33//#testresult/2fa6f8c962cf469c","status":"failed","statusDetails":"AssertionError: Key 'metadata' in 'seed.test.seed' did not match\nassert {'comment': N...r': None, ...} == {'comment': N...r': None, ...}\n  Omitting 5 identical items, use -vv to show\n  Differing items:\n  {'type': 'DIMENSION'} != {'type': 'BASE TABLE'}\n  Full diff:\n    {\n     'comment': None,\n     'database': 'integration_testing__1722461861',\n     'name': 'seed',\n     'owner': None,\n     'schema': 'public',\n  -  'type': 'BASE TABLE',\n  +  'type': 'DIMENSION',\n    }","time":{"start":1722462207258,"stop":1722462211054,"duration":3796}}]},"tags":[]},"source":"7450bf1f54ee7a99.json","parameterValues":[]}